import{E as y,h as S,w as f}from"./services.99864b47.js";import{P as $}from"./ProxyInput.c7c194a6.js";import{d as g,_ as v,c as b,w as t,a as C,o,b as a,e as L,f as K,g as P,h as B,i as D,j as n,H as I,V as c,l as U,m as R,n as d,p as u,q as T,r as l,s as w,x as p,A,B as E,F,C as _,z as m}from"./index.4ac873d2.js";import{C as q}from"./CheckBox.06b0a960.js";import"./helper.8a7057fb.js";const N=g({name:"CreateWithdraw",components:{ProxyInput:$},props:{showProp:Boolean},watch:{showProp:{immediate:!0,handler(e,r){this.show=e}}},data(){return{exchange:y.Binance,exchanges:[y.Binance],show:this.showProp,item:{},proxyRules:[async e=>{if(!e)return!0;const r=await S.helperServiceValidateProxy({body:{proxy:e}});return r.valid?!0:r.errorMessage}],mmskWalletId:"",proxyStat:"",proxyLoading:!1,proxyErrorMessage:"",proxyTimer:0,saveLoading:!1}},methods:{labelRules(){return[e=>this.item.label?!0:"label is required"]},apiKeyRules(){return[e=>this.item.apiKey?!0:"api key is required"]},secretKeyRules(){return[e=>this.item.secretKey?!0:"api secret key is required"]},async labelChanged(e){await this.validate()},async proxyChanged(e){this.item.proxy=e},async apiSecretChanged(e){await this.validateApiSecret()},async apiKeyChanged(e){await this.validateApiKey()},async validate(){const{valid:e}=await this.$refs["label-input"].validate();return e},async validateApiKey(){const{valid:e}=await this.$refs["api-key-input"].validate();return e},async validateApiSecret(){const{valid:e}=await this.$refs["secret-input"].validate();return e},async validateForm(){const{valid:e}=await this.$refs.form.validate();return e},async CreateWithdrawer(){if(!!await this.validateForm())try{this.saveLoading=!0,await f.withdrawerServiceCreateWithdrawer({body:this.item}),this.$emit("change",!1),this.$emit("profileCreated")}catch{this.saveLoading=!1}},Close(){this.$emit("change",!1)}}}),j=l("span",{class:"text-h5"},"Create withdraw account",-1);function z(e,r,V,k,x,W){const h=w("ProxyInput");return o(),b(C,{justify:"center"},{default:t(()=>[a(T,{modelValue:e.show,"onUpdate:modelValue":r[4]||(r[4]=s=>e.show=s),persistent:"",width:"1024"},{default:t(()=>[a(L,null,{default:t(()=>[a(K,null,{default:t(()=>[j]),_:1}),a(P,null,{default:t(()=>[a(B,null,{default:t(()=>[a(D,{"validate-on":"submit",ref:"form"},{default:t(()=>[a(C,null,{default:t(()=>[a(n,{cols:"12",sm:"6",md:"4"},{default:t(()=>[a(I,{items:e.exchanges,modelValue:e.exchange,"onUpdate:modelValue":r[0]||(r[0]=s=>e.exchange=s),label:"Exchange",variant:"outlined",density:"comfortable"},null,8,["items","modelValue"])]),_:1}),a(n,{cols:"12",sm:"6",md:"8"},{default:t(()=>[a(c,{ref:"label-input",modelValue:e.item.label,"onUpdate:modelValue":r[1]||(r[1]=s=>e.item.label=s),label:"label",density:"comfortable",variant:"outlined",rules:e.labelRules(),onInput:e.labelChanged},null,8,["modelValue","rules","onInput"])]),_:1}),a(n,{cols:"12",sm:"12",md:"12"},{default:t(()=>[a(c,{ref:"secret-input",rules:e.secretKeyRules(),onInput:e.apiSecretChanged,modelValue:e.item.secretKey,"onUpdate:modelValue":r[2]||(r[2]=s=>e.item.secretKey=s),density:"comfortable",variant:"outlined",label:"exchange api secret key*",hint:"exchange api secret key"},null,8,["rules","onInput","modelValue"])]),_:1}),a(n,{cols:"12",sm:"12",md:"12"},{default:t(()=>[a(c,{ref:"api-key-input",rules:e.apiKeyRules(),onInput:e.apiKeyChanged,modelValue:e.item.apiKey,"onUpdate:modelValue":r[3]||(r[3]=s=>e.item.apiKey=s),density:"comfortable",variant:"outlined",label:"exchange api key*",hint:"exchange api key"},null,8,["rules","onInput","modelValue"])]),_:1}),a(n,{cols:"12"},{default:t(()=>[a(h,{onChanged:e.proxyChanged,required:!0},null,8,["onChanged"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1}),a(U,null,{default:t(()=>[a(R),a(d,{color:"blue-darken-1",variant:"text",onClick:e.Close},{default:t(()=>[u(" Close ")]),_:1},8,["onClick"]),a(d,{type:"submit",color:"blue-darken-1",variant:"text",disabled:e.saveLoading,loading:e.saveLoading,onClick:e.CreateWithdrawer},{default:t(()=>[u(" Save ")]),_:1},8,["disabled","loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const M=v(N,[["render",z]]),H=g({name:"Withdraw",components:{CheckBox:q,CreateWithdraw:M},props:{},data(){return{list:[],showCreateWithdrawerDialog:!1,selected:new Set}},computed:{getList(){return this.list},selectedSome(){return this.selected.size>0}},methods:{CheckboxChanged(e,r){r?this.selected.add(e):this.selected.delete(e)},async UpdateList(){const e=await f.withdrawerServiceListWithdrawer();this.list=e.withdrawers,this.selected=new Set},CreateWithdrawer(){this.showCreateWithdrawerDialog=!0},CreateWithdrawerChange(e){this.showCreateWithdrawerDialog=e},async DeleteWithdrawers(){for(let e of this.selected.keys())await f.withdrawerServiceDeleteWithdrawer({body:{id:e}});await this.UpdateList()}},created(){this.UpdateList()}}),G={class:"d-flex justify-end"},J=l("thead",null,[l("tr",null,[l("th"),l("th",{class:"text-left"},"Label"),l("th",{class:"text-left"},"Exchange"),l("th",{class:"text-left"},"Proxy")])],-1);function O(e,r,V,k,x,W){const h=w("CheckBox"),s=w("CreateWithdraw");return o(),p("div",null,[l("div",G,[e.selectedSome?(o(),b(d,{key:0,color:"black",onClick:e.DeleteWithdrawers,class:"ma-3"},{default:t(()=>[u("Delete withdraw accounts")]),_:1},8,["onClick"])):A("",!0),a(d,{onClick:e.CreateWithdrawer,class:"ma-3"},{default:t(()=>[u("Create withdraw account")]),_:1},8,["onClick"])]),a(E,null,{default:t(()=>[J,l("tbody",null,[(o(!0),p(F,null,_(e.getList,i=>(o(),p("tr",{key:i.id},[l("td",null,[a(h,{style:{height:"40px"},density:"compact",id:i.id,focused:"",onCheckboxChanged:e.CheckboxChanged},null,8,["id","onCheckboxChanged"])]),l("td",null,m(i.label),1),l("td",null,m(i.exchangeType),1),l("td",null,m(i.proxy||"disabled"),1)]))),128))])]),_:1}),a(s,{showProp:e.showCreateWithdrawerDialog,onChange:e.CreateWithdrawerChange,onProfileCreated:e.UpdateList},null,8,["showProp","onChange","onProfileCreated"])])}const ae=v(H,[["render",O]]);export{ae as default};
