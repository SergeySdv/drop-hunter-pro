import{T as h,f as C}from"./services.99864b47.js";import{C as m}from"./CreateFlow.07df0002.js";import{C as k}from"./CheckBox.06b0a960.js";import{d as g,_ as F,x as i,r as t,c as y,w as l,n as c,A as b,b as a,B as S,s as w,o as r,p as d,F as B,C as _,z as u}from"./index.4ac873d2.js";import"./tasks.e8742239.js";const D=g({name:"Constructor",components:{CheckBox:k,CreateFlow:m},props:{},data(){return{list:[],showCreateFlowDialog:!1,selected:new Set}},computed:{getList(){return this.list},selectedSome(){return this.selected.size>0}},methods:{viewRoute(e){this.$router.push({name:"ViewFlow",params:{id:e}})},showStep(e){if(!e||!e.tasks)return"-";let o="";return e.tasks.forEach(n=>{switch(n.taskType){case h.StargateBridge:o+=`${n.weight}) ${h.StargateBridge}`}}),o},CheckboxChanged(e,o){o?this.selected.add(e):this.selected.delete(e)},async UpdateList(){const e=await C.flowServiceListFlow();this.list=e.flows,this.selected=new Set},CreateFlow(){this.showCreateFlowDialog=!0},CreateFlowChange(e){this.showCreateFlowDialog=e},async DeleteFlows(){for(let e of this.selected.keys())await C.flowServiceDeleteFlow({body:{id:e}});await this.UpdateList()}},created(){this.UpdateList()}}),v={class:"d-flex justify-end"},L=t("thead",null,[t("tr",null,[t("th"),t("th",{class:"text-left"},"Label"),t("th",{class:"text-left"},"Details"),t("th",{class:"text-left"},"View")])],-1);function V(e,o,n,x,$,T){const p=w("CheckBox"),f=w("CreateFlow");return r(),i("div",null,[t("div",v,[e.selectedSome?(r(),y(c,{key:0,color:"black",onClick:e.DeleteFlows,class:"ma-3"},{default:l(()=>[d("Delete flow")]),_:1},8,["onClick"])):b("",!0),a(c,{onClick:e.CreateFlow,class:"ma-3"},{default:l(()=>[d("Create flow")]),_:1},8,["onClick"])]),a(S,null,{default:l(()=>[L,t("tbody",null,[(r(!0),i(B,null,_(e.getList,s=>(r(),i("tr",{key:s.id},[t("td",null,[a(p,{style:{height:"40px"},density:"compact",id:s.id,focused:"",onCheckboxChanged:e.CheckboxChanged},null,8,["id","onCheckboxChanged"])]),t("td",null,u(s.label),1),t("td",null,u(e.showStep(s)),1),t("td",null,[a(c,{color:"blue",density:"compact",onClick:N=>e.viewRoute(s.id)},{default:l(()=>[d("View")]),_:2},1032,["onClick"])])]))),128))])]),_:1}),a(f,{showProp:e.showCreateFlowDialog,onChange:e.CreateFlowChange,onCreated:e.UpdateList},null,8,["showProp","onChange","onCreated"])])}const j=F(D,[["render",V]]);export{j as default};
